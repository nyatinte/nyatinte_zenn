---
title: 'TailwindCSSã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ãã«æ„è­˜ã—ã¦ã„ã‚‹ã“ã¨'
emoji: 'ğŸŒŠ'
type: 'tech'
topics:
  - 'react'
  - 'typescript'
  - 'tailwindcss'
published: true
published_at: '2023-02-10 19:32'
---

# æ¦‚è¦

å€‹äººçš„ã« TailwindCSS ã‚’ä½¿ã£ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆã‚’ã™ã‚‹ã¨ãã«æ„è­˜ã—ã¦ã„ã‚‹ã“ã¨ã‚’ã¾ã¨ã‚ã¾ã™

:::message
2023/02/13 2 ã«è§£èª¬ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
:::

# 1. `ComponentProps`ã‚’ä½¿ã†

å¤šãã®äººãŒè¿°ã¹ã¦ã„ã¾ã™ãŒã€æ‹¡å¼µæ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«`React.ComponentProps`ã‚’ä½¿ã„ã¾ã™ã€‚

```tsx:Button.tsx
import { ComponentProps, FC } from 'react'

type ButtonProps = {
  loading: boolean
} & ComponentProps<'button'>

export const Button: FC<ButtonProps> = ({ loading, children, ...props }) => {
  return <button {...props}>{loading ? children : 'Loading...'}</button>
}
```

ã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ã§ç”¨ã„ã‚‹ã¨ãã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒœã‚¿ãƒ³ã¨åŒã˜ã‚ˆã†ãªä½¿ç”¨æ„Ÿã§ç”¨ã„ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

# 2. `tailwind-merge`ã‚’ä½¿ã†

`tailwind-merge`ã¯`className`ã®çµåˆã‚’ã„ã„æ„Ÿã˜ã«ã‚„ã£ã¦ãã‚Œã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚
https://github.com/dcastil/tailwind-merge
ä»¥ä¸‹ã¯å…¬å¼ã‚ˆã‚Šå¼•ç”¨ã—ã¾ã™

> What is it for
> If you use Tailwind with a component-based UI renderer like React or Vue, you're probably familiar with the situation that you want to change some styles of a component, but only in one place.
> // React components with JSX syntax used in this example

```tsx
function MyGenericInput(props) {
  const className = `border rounded px-2 py-1 ${props.className || ''}`;
  return <input {...props} className={className} />;
}

function MySlightlyModifiedInput(props) {
  return (
    <MyGenericInput
      {...props}
      className='p-3' // â† Only want to change some padding
    />
  );
}
```

> When the MySlightlyModifiedInput is rendered, an input with the className border rounded px-2 py-1 p-3 gets created. But because of the way the CSS cascade works, the styles of the p-3 class are ignored. The order of the classes in the className string doesn't matter at all and the only way to apply the p-3 styles is to remove both px-2 and py-1.
> This is where tailwind-merge comes in.

```tsx
function MyGenericInput(props) {
  // â†“ Now `props.className` can override conflicting classes
  const className = twMerge('border rounded px-2 py-1', props.className);
  return <input {...props} className={className} />;
}
```

> tailwind-merge overrides conflicting classes and keeps everything else untouched. In the case of the MySlightlyModifiedInput, the input now only renders the classes border rounded p-3.

ç°¡å˜ã«ã¾ã¨ã‚ã‚‹ã¨ã€
ï½¢`px-2 py-1`ã§ã¯ãªãã€`p-3`ã«ã™ã‚‹ã¨ãã¯`px-2 py-1`ã‚’æ¶ˆã•ãªã„ã¨ã†ã¾ãç¹æ „ã•ã‚Œãªã„ã‚ˆï¼`tw-merge`ã¯ãã“ã‚‰ã¸ã‚“ã®å‡¦ç†ã‚’ã†ã¾ãã‚„ã£ã¦ãã‚Œã‚‹ã‚ˆï¼ï½£
ã£ã¦ã“ã¨ã§ã™ã€‚
ã“ã®ã‚ˆã†ã«å…ƒã®`className`ã‚’ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆã™ã‚‹ã“ã¨ãªãã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã‚Œã‚’ä½¿ã£ã¦ãƒ™ãƒ¼ã‚¹ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æŒã¡ã¤ã¤ã€æ‹¡å¼µæ€§ã®é«˜ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚

```tsx diff:Button.tsx
import { ComponentProps, FC } from 'react'
+import { twMerge } from 'tailwind-merge'

type ButtonProps = {
  loading: boolean
} & ComponentProps<'button'>

export const Button: FC<ButtonProps> = ({
  loading,
  children,
+  className,
  ...props
}) => {
+  const baseClass =
+    'inline-block px-4 py-2 text-xs font-bold text-white bg-blue rounded-full'
+  const mergedClass = twMerge(baseClass, className)
  return (
+    <button className={mergedClass} {...props}>
      {loading ? children : 'Loading...'}
    </button>
  )
}
```

# 3. `ref`ã‚’ä½¿ã†ã¨ãã¯`forwardRef`ãƒ»`componentPropsWithRef`

react-hook-foom ã§ä»¥ä¸‹ã®ã‚ˆã†ãªæ›¸ãæ–¹ã‚’è¦‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚

```tsx
<input {...register('name')} />
```

ã“ã‚Œã¯ãã®ã¾ã¾æ‰±ã†ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚`register`ã®æˆ»ã‚Šå€¤ã«`ref`ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚
ãã®å ´åˆã¯`forwardRef`ã¨`componentPropsWithRef`ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚

```tsx diff:Input.tsx
import { ComponentPropsWithRef, forwardRef } from 'react'
import { twMerge } from 'tailwind-merge'

type InputProps = {
  label: string
  // labelã¨inputã®classNameã‚’åˆ†ã‘ã‚‹
  labelClassName?: string
  inputClassName?: string
} & Omit<ComponentPropsWithRef<'input'>, 'className'>

+export const Input = forwardRef<HTMLInputElement, InputProps>(
  ({ label, labelClassName, inputClassName, ...props }, ref): JSX.Element => {
    const baseLabelClass = 'text-xs font-bold text-gray-600'
    const baseInputClass =
      'w-full px-4 py-2 text-sm text-gray-600 border border-gray-300 rounded-md focus:border-blue focus:outline-none'
    const mergedLabelClass = twMerge(baseLabelClass, labelClassName)
    const mergedInputClass = twMerge(baseInputClass, inputClassName)
    return (
      <div className="flex flex-col">
        <label className={mergedLabelClass}>{label}</label>
+        <input ref={ref} className={mergedInputClass} {...props} />
      </div>
    )
  },
)

+Input.displayName = 'Input'

```

`forwardRef<{HTMLã®è¦ç´ }, {Props}>`ã¨ã„ã†æ„Ÿã˜ã§ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã« Type ã‚’å…¥ã‚Œã¾ã™ã€‚
ã¾ãŸã€forwardRef ã‚’ä½¿ç”¨ã—ãŸå ´åˆã€eslint ãªã©ã®è¨­å®šã«ã‚ˆã£ã¦ã¯ã€Œã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®åå‰ãŒãªã„ã‚ˆï¼ã€ã¨æ€’ã‚‰ã‚Œã‚‹ã®ã§ã€æ˜ç¤ºçš„ã«`Input.displayName = 'Input'`ã¨æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚

# çµ‚ã‚ã‚Šã«

ã“ã®ã‚ˆã†ãªä½¿ã„å›ã—ã®å¤šã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å‹ãªã©ã‚‚å«ã‚ã€ãã¡ã‚“ã¨å®šç¾©ã—ãŸæ–¹ãŒå¾Œã€…è² å‚µã«ãªã‚Šã«ãã„ã§ã™ã€‚
ã‚ˆã‚Šè‰¯ã„é–‹ç™ºä½“é¨“ã‚’ç›®æŒ‡ã—ã¦ã„ãã¾ã—ã‚‡ã†ï¼
