---
title: 'ï½¢Bulletproof Reactï½£ã‹ã‚‰å­¦ã¶ã€FieldWrapperã‚’ä½¿ã£ã¦çµ±ä¸€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…ã™ã‚‹'
emoji: 'ğŸ'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics:
  ['react', 'typescript', 'tailwindcss', 'reacthookform', 'ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè¨­è¨ˆ']
published: true
---

å…ˆæ—¥[Bulletproof React](https://github.com/alan2207/bulletproof-react)ã‚’èª­ã‚“ã§ã„ãŸã‚‰ä¾¿åˆ©ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã£ãŸã®ã§ã€è‡ªåˆ†ãªã‚Šã®è§£é‡ˆã‚’åŠ ãˆã¦å®Ÿè£…ã—ã¦ã¿ã¾ã—ãŸã€‚

https://github.com/alan2207/bulletproof-react

:::message

### ç’°å¢ƒ

---

- **next**: 13.3.0,
- **react**: 18.2.0,
- **react-hook-form**: ^7.43.9,
- **tailwind-merge**: ^1.12.0,
- **tailwindcss**: 3.3.1,
- **typescript**: 5.0.4,
- **zod**: ^3.21.4"
  :::

ã‚³ãƒ¼ãƒ‰ã€ãƒ‡ãƒ¢ãŒè¦‹ãŸã„æ–¹ã¯ã“ã¡ã‚‰ã‹ã‚‰ã©ã†ãã€‚
https://github.com/nyatinte/Zenn_FieldWrapperExample

https://codesandbox.io/p/github/nyatinte/Zenn_FieldWrapperExample/draft/lively-cloud?file=%2FREADME.md&workspace=%257B%2522activeFilepath%2522%253A%2522%252FREADME.md%2522%252C%2522openFiles%2522%253A%255B%2522%252FREADME.md%2522%255D%252C%2522sidebarPanel%2522%253A%2522EXPLORER%2522%252C%2522gitSidebarPanel%2522%253A%2522COMMIT%2522%252C%2522spaces%2522%253A%257B%2522clgedf5oh000x3b6iukkff7p1%2522%253A%257B%2522key%2522%253A%2522clgedf5oh000x3b6iukkff7p1%2522%252C%2522name%2522%253A%2522Default%2522%252C%2522devtools%2522%253A%255B%257B%2522type%2522%253A%2522PREVIEW%2522%252C%2522taskId%2522%253A%2522dev%2522%252C%2522port%2522%253A34033%252C%2522key%2522%253A%2522clgedfmhv006d3b6i2jthdcwp%2522%252C%2522isMinimized%2522%253Afalse%257D%255D%257D%257D%252C%2522currentSpace%2522%253A%2522clgedf5oh000x3b6iukkff7p1%2522%252C%2522spacesOrder%2522%253A%255B%2522clgedf5oh000x3b6iukkff7p1%2522%255D%252C%2522hideCodeEditor%2522%253Afalse%257D

## `FieldWrapper`ã£ã¦ã©ã‚“ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼Ÿï¼Ÿ

**`Input`ã‚„`Select`ãªã©ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã™ã€‚**

```tsx:FieldWrapper.tsx
import { FC, ReactNode } from 'react';
import { twMerge } from 'tailwind-merge';

type FieldWrapperProps = {
  label?: string;
  error?: string;
  description?: string;
  className?: string;
  children: ReactNode;
};
export type FieldWrapperPassThroughProps = Omit<
  FieldWrapperProps,
  'children' | 'className'
>;
export const FieldWrapper: FC<FieldWrapperProps> = ({
  label,
  error,
  className,
  description,
  children,
}) => {
  return (
    <div>
      <label className={twMerge('block mb-1', className)}>
        {label}
        {children}
      </label>
      {description && <p className='text-gray-500'>{description}</p>}
      {error && (
        <div role='alert' className='text-red-500'>
          {error}
        </div>
      )}
    </div>
  );
};

```

`twMerge`ã‚„è¨­è¨ˆã«ã¤ã„ã¦ã¯ã€ç§ãŒä»¥å‰åŸ·ç­†ã—ãŸ[ã“ã¡ã‚‰ã®è¨˜äº‹](https://zenn.dev/nyatinte/articles/083ebbe8ab2457)ã‚’å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

https://zenn.dev/nyatinte/articles/083ebbe8ab2457

## ä½¿ã„æ–¹

```tsx:InputField.tsx
import { forwardRef } from 'react';
import { FieldWrapper, FieldWrapperPassThroughProps } from '../FieldWrapper';
import { Input, InputProps } from './Input';

export type InputFieldProps = InputProps & FieldWrapperPassThroughProps;
export const InputField = forwardRef<HTMLInputElement, InputFieldProps>(
  ({ label, error, description, ...props }, ref) => {
    return (
      <FieldWrapper label={label} error={error} description={description}>
        <Input {...props} ref={ref} />
      </FieldWrapper>
    );
  }
);

InputField.displayName = 'Input';
```

## ãªã‚“ã§ä¾¿åˆ©ãªã®ï¼Ÿ

:::message

- **ãƒ•ã‚©ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ä½œæˆã—ãŸã¨ãã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå´©ã‚Œã‚’é˜²ãã“ã¨ãŒã§ãã‚‹**
- **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆãŒä½ããªã‚‹**
  :::

å…ˆç¨‹ã®`InputField`ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

![InputField](https://storage.googleapis.com/zenn-user-upload/104279c86b7b-20230413.png)

ã„ã„æ„Ÿã˜ã§ã™ã­ã€ã§ã¯ä»–ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
`InputField`ã¨åŒã˜ã‚ˆã†ã«`SelectField`ã‚’ä½œæˆã—ã¦ã¿ã¾ã™ã€‚

```tsx:SelectField.tsx
import { forwardRef } from 'react';
import { FieldWrapper, FieldWrapperPassThroughProps } from '../FieldWrapper';
import { Select, SelectProps } from './Select';

export type SelectFieldProps = SelectProps & FieldWrapperPassThroughProps;
export const SelectField = forwardRef<HTMLSelectElement, SelectFieldProps>(
  ({ label, error, description, ...props }, ref) => {
    return (
      <FieldWrapper label={label} error={error} description={description}>
        <Select {...props} ref={ref} />
      </FieldWrapper>
    );
  }
);

SelectField.displayName = 'Select';
```

ã§ã¯`SelectField`ã‚’ä½¿ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
![SelectField](https://storage.googleapis.com/zenn-user-upload/b4e323e2aaf8-20230413.png)

å…ˆç¨‹ã®`InputField`ã¨ä¸¦ã¹ã¦ã¿ã¾ã™ã€‚

![InputFieldã¨SelectField](https://storage.googleapis.com/zenn-user-upload/1d54e1b8e61b-20230413.png)

ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®è²¬å‹™ã‚’`FieldWrapper`ã«ä»»ã›ã‚‹ã“ã¨ã§ã€æ„å›³ã—ãªã„ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå´©ã‚Œã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚
ã“ã“ã§ã¯çœç•¥ã—ã¾ã™ãŒã€`TextAreaField`ã‚„`CheckboxField`ãªã©ã‚‚åŒæ§˜ã«ä½œæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## ã¾ã¨ã‚

ã„ã‹ãŒã§ã—ãŸã§ã—ã‚‡ã†ã‹ã€‚
`FieldWrapper`ãŒä¾¿åˆ©ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã‚ã‚‹ã“ã¨ãŒå°‘ã—ã§ã‚‚ä¼ã‚ã‚Œã°å¬‰ã—ã„ã§ã™ã€‚

[GitHub ã®ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/nyatinte/Zenn_FieldWrapperExample)ã€[CodeSandbox](https://codesandbox.io/p/github/nyatinte/Zenn_FieldWrapperExample/draft/lively-cloud?file=%2FREADME.md&workspace=%257B%2522activeFilepath%2522%253A%2522%252FREADME.md%2522%252C%2522openFiles%2522%253A%255B%2522%252FREADME.md%2522%255D%252C%2522sidebarPanel%2522%253A%2522EXPLORER%2522%252C%2522gitSidebarPanel%2522%253A%2522COMMIT%2522%252C%2522spaces%2522%253A%257B%2522clgedf5oh000x3b6iukkff7p1%2522%253A%257B%2522key%2522%253A%2522clgedf5oh000x3b6iukkff7p1%2522%252C%2522name%2522%253A%2522Default%2522%252C%2522devtools%2522%253A%255B%257B%2522type%2522%253A%2522PREVIEW%2522%252C%2522taskId%2522%253A%2522dev%2522%252C%2522port%2522%253A34033%252C%2522key%2522%253A%2522clgedfmhv006d3b6i2jthdcwp%2522%252C%2522isMinimized%2522%253Afalse%257D%255D%257D%257D%252C%2522currentSpace%2522%253A%2522clgedf5oh000x3b6iukkff7p1%2522%252C%2522spacesOrder%2522%253A%255B%2522clgedf5oh000x3b6iukkff7p1%2522%255D%252C%2522hideCodeEditor%2522%253Afalse%257D) ã‚’ç”¨æ„ã—ã¾ã—ãŸã®ã§ã€èˆˆå‘³ãŒã‚ã‚‹æ–¹ã¯æ˜¯éã”è¦§ãã ã•ã„ã€‚

https://github.com/nyatinte/Zenn_FieldWrapperExample

https://codesandbox.io/p/github/nyatinte/Zenn_FieldWrapperExample/draft/lively-cloud?file=%2FREADME.md&workspace=%257B%2522activeFilepath%2522%253A%2522%252FREADME.md%2522%252C%2522openFiles%2522%253A%255B%2522%252FREADME.md%2522%255D%252C%2522sidebarPanel%2522%253A%2522EXPLORER%2522%252C%2522gitSidebarPanel%2522%253A%2522COMMIT%2522%252C%2522spaces%2522%253A%257B%2522clgedf5oh000x3b6iukkff7p1%2522%253A%257B%2522key%2522%253A%2522clgedf5oh000x3b6iukkff7p1%2522%252C%2522name%2522%253A%2522Default%2522%252C%2522devtools%2522%253A%255B%257B%2522type%2522%253A%2522PREVIEW%2522%252C%2522taskId%2522%253A%2522dev%2522%252C%2522port%2522%253A34033%252C%2522key%2522%253A%2522clgedfmhv006d3b6i2jthdcwp%2522%252C%2522isMinimized%2522%253Afalse%257D%255D%257D%257D%252C%2522currentSpace%2522%253A%2522clgedf5oh000x3b6iukkff7p1%2522%252C%2522spacesOrder%2522%253A%255B%2522clgedf5oh000x3b6iukkff7p1%2522%255D%252C%2522hideCodeEditor%2522%253Afalse%257D
